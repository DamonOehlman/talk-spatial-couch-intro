<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Introduction to GeoCouch</title>
	<meta name="viewport" content="width=1024, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="css/pres.style.css" /><link rel="stylesheet" type="text/css" href="css/highlight.zenburn.css" /><script src="js/modernizr.custom.js"></script><link rel="stylesheet" type="text/css" href="css/deck.core.css" /><link rel="stylesheet" type="text/css" href="css/deck.hash.css" /><link rel="stylesheet" type="text/css" href="css/swiss.css" />
</head>
<body class="deck-container">
<!-- use the handlebars each statement to create multiple content sections for the included files -->

<section class="slide" >
	<h1>Getting Started with GeoCouch</h1>


</section>

<section class="slide" >
	<h2>Overview</h2>

<ul><li>What is CouchDB?</li><li>Why CouchDB is awesome.</li><li>Why CouchDB <strong>will impact</strong> spatial.</li><li>Let&#39;s talk GeoCouch</li></ul>


</section>

<section class="slide" >
	<h1>Getting Started with CouchDB</h1>


</section>

<section class="slide" >
	<h2>Not Installing CouchDB</h2>

<ul><li>By far the easiest way to get started with CouchDB, is to <strong>not</strong> install it.</li><li>One of the best ways to do this is to use IrisCouch: <a href="http://www.iriscouch.com/">http://www.iriscouch.com/</a>.</li><li>If you do need to install it, then I&#39;d recommend looking at <a href="http://refuge.io">http://refuge.io</a> - the guys there are doing some great work making the install easier.</li></ul>


</section>

<section class="slide" >
	<h2>Interacting with CouchDB</h2>

<ul><li>All interaction with CouchDB is done through a sensible, RESTful API.</li><li>There are also many libraries for working with the API. </li><li>My preference is for those which provide an interface as close to the actual HTTP API as possible.</li><li>And, there is a pretty friendly web admin utility called Futon.</li></ul>


</section>

<section class="slide" >
	<h2>Getting Data into Couch</h2>

<p>Given you lot are spatial types, I&#39;m going to recommend using GDAL, and in particular the <code>ogr2ogr</code> tool.</p>

<pre><code class="bash">ogr2ogr -f couchdb "couchdb:http://yourname.iriscouch.com/boundaries" sourcedata.shp -nln boundaries -overwrite</pre></code>

<p>Credentials can be passed in using the <code>COUCHDB_USERPWD</code> environment variable:</p>

<pre><code class="bash">COUCHDB_USERPWD=admin:yourpass ogr2ogr -f couchdb "couchdb:http://yourname.iriscouch.com/boundaries" sourcedata.shp -nln boundaries -overwrite</pre></code>


</section>

<section class="slide" >
	<h1>IndexedDB</h1>


</section>

<section class="slide" >
	<h2>Overview</h2>

<p>The <a href="http://www.w3.org/TR/IndexedDB/">Indexed Database API</a> is a great looking spec.  While it&#39;s still early days at the moment, the approach shows a lot of promise for working with larger client side datasets.</p>

<p>It is more complicated to work with than the Web Storage APIs (it&#39;s asynchronous for a start) but not quite as painful as WebSQL.</p>

<p><em>Examples for this section are modified from an excellent <a href="http://www.html5rocks.com/">html5rocks.com</a> article:</em></p>

<p><em><a href="http://www.html5rocks.com/en/tutorials/indexeddb/todo/">A Simple ToDo list using HTML5 IndexedDB</a></em></p>


</section>

<section class="slide" >
	<h2>Opening a DB</h2>

<p>Opening a database is reasonably simple, and is done through making an open database request:</p>

<pre><code class="javascript">// create a database open request
var request = indexedDB.open('todolist'),
    db;

request.onsuccess = function(e) {
    // update the database reference
    db = e.target.result;
    console.log('successfully opened db: ' + db.name);
};

request.onfailure = function(e) {}; // TODO: handle errors</pre></code>

<p><strong>NOTE:</strong> While not shown in the example above, the reference to <code>indexedDB</code> has been mapped from a vendor prefixed version of IndexedDB.  Depending on your browser it will be one of <code>webkitIndexedDB</code>, <code>mozIndexedDB</code>, <code>oIndexedDB</code> or <code>msIndexedDB</code>.</p>


</section>

<section class="slide" >
	<h2>Creating an Object Store</h2>

<p>While opening the database was simple enough, things start to go downhill a little from here.  Before we can add objects to our database we need to create an object store using a <code>db.createObjectStore</code> call.</p>

<p>Additionally, creating the object store can only be done in the context of a <code>setVersion</code> request.  The following is a simplified version of what is usually required:</p>

<pre><code class="javascript">request.onsuccess = function(e) {
    var setVrequest = db.setVersion('1.0');

    setVrequest.onsuccess = function() {
        var store = db.createObjectStore(
                'todo', // title of the object store
                { keyPath: 'timeStamp' }
        );
    };
};</pre></code>


</section>

<section class="slide" data-bg="../img/468245_79094304.jpg"data-attribution="http://www.sxc.hu/photo/468245">
	<h1>Worth the Climb?</h1>


</section>

<section class="slide" >
	<h1>Yes - but I&#39;ll spare you the boring bits.</h1>


</section>

<section class="slide" >
	<h2>Putting Objects in the Store</h2>

<p>Eventually, after a few more calls to <code>transaction</code> and <code>objectStore</code> functions you can start to put things into your object store:</p>

<pre><code class="javascript">// we have a reference to store from some previous heavy lifting
// so now put something in the store
var request = store.put({
    text: 'Write a nice wrapper to IndexedDB',
    timeStamp: new Date().getTime()
});

request.onsuccess = function(e) {
    // item added
};</pre></code>


</section>

<section class="slide" >
	<h2>Retrieving Objects from the Store</h2>

<p>Retrieving objects from an object store can be very simple.  If you are using it like the Web Storage API, a store supports <code>get</code> calls for retrieving an item matching the provided key value:</p>

<pre><code class="javascript">// given we know the timestap of a todo, we can retrieve it
var request = store.get(todoTimestamp);

request.onsuccess = function(e) {
    // item retrieved
};</pre></code>

<p>Iterating over the contents of the store requires a <a href="http://www.w3.org/TR/IndexedDB/#cursor-concept">cursor</a> which is something I won&#39;t be touching on tonight. </p>


</section>

<section class="slide" >
	<h2>Can I Use IndexedDB</h2>

<p>So your feeling brave?  Let&#39;s see <a href="http://caniuse.com/#feat=indexeddb">which browsers support</a> IndexedDB.</p>

<p><img alt="" src="../img/indexeddb.png"></img></p>

<p><strong>Desktop browsers</strong>: maybe, if your apps are experimental or for a narrow audience.</p>

<p><strong>Mobile browsers</strong>:  Um, no :(</p>


</section>

<section class="slide" >
	<h2>More Information</h2>

<p>More information on IndexedDB can be found at the following locations:</p>

<ul><li><p><a href="http://www.html5rocks.com/en/tutorials/indexeddb/todo/">A Simple ToDo List using HTML5 IndexedDB</a></p></li><li><p><a href="https://developer.mozilla.org/en/IndexedDB/Using_IndexedDB">Using IndexedDB</a></p></li><li><p><a href="https://developer.mozilla.org/en/IndexedDB/Basic_Concepts_Behind_IndexedDB">Basic Concepts Behind IndexedDB</a></p></li></ul>


</section>

<script src="js/pres.js"></script><script src="js/highlight.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="js/highlight-bash.js"></script><script src="js/highlight-javascript.js"></script><script src="js/jquery.min.js"></script><script src="js/deck.core.js"></script><script src="js/deck.hash.js"></script>
<script>
	$(function() {
		$.deck('.slide');
	});
</script>
</body>
</html>